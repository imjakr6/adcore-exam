(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(32),c=n.n(r),s=(n(55),n(19)),i=n(14),d=n.n(i),l=n(26),u=n(8),h=n(9),j=n(12),b=n(11),p=n(46),x=n.n(p),g=n(27),m=n.n(g),f=(n(103),n(7)),O=n(0),N=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;"checkbox"===t.type&&(n=n?1:0),console.log(n);var o=t.name;a.setState(Object(f.a)({},o,n))},a.handleSubmit=function(){if(null!==a.state.id&&null!==a.state.parent){var e=a.state;a.props.onSubmit(e)}else console.log("need id and parent to make a new node")},a.state={id:"",name:"",description:"",parent:"",read_only:"1"},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.id,n=e.name,a=e.description,o=e.parent,r=e.read_only;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:t,placeholder:"Node Id",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Node Name: "}),Object(O.jsx)("input",{name:"name",vaule:n,placeholder:"Node Name",onChange:this.handleChange})]}),Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column px-2",children:[Object(O.jsx)("label",{children:"Node Description: "}),Object(O.jsx)("input",{name:"description",vaule:a,placeholder:"Node Description",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Parent ID: "}),Object(O.jsx)("input",{name:"parent",vaule:o,placeholder:"Parent ID",onChange:this.handleChange})]}),Object(O.jsxs)("div",{className:"new-node-container-col d-flex pt-4",children:[Object(O.jsx)("label",{style:{width:"100px"},children:"Read Only: "}),Object(O.jsx)("input",{name:"read_only",checked:r,className:"mt-1",type:"checkbox",placeholder:"Read Only",onChange:this.handleChange}),Object(O.jsx)("button",{style:{height:30,width:100,marginLeft:10},children:"Add Node"})]})]})})}}]),n}(a.Component),v=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.value,o=t.name;a.setState(Object(f.a)({},o,n))},a.handleSubmit=function(){if(null!==a.state.id){var e=a.state;a.props.onSubmit(e)}else console.log("need id to delete a new node")},a.state={id:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.id;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:e,placeholder:"Node Id",onChange:this.handleChange})]}),Object(O.jsx)("div",{className:"new-node-container-col d-flex pt-4",children:Object(O.jsx)("button",{style:{height:30,marginLeft:10},children:"Delete Node"})})]})})}}]),n}(a.Component),C=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.value,o=t.name;a.setState(Object(f.a)({},o,n))},a.handleSubmit=function(){if(null!==a.state.id){var e=a.state;a.props.onSubmit(e)}else console.log("need id to update a new node")},a.state={id:"",name:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.id,n=e.name;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:t,placeholder:"Node Id",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Node Name: "}),Object(O.jsx)("input",{name:"name",vaule:n,placeholder:"Node Name",onChange:this.handleChange})]}),Object(O.jsx)("div",{className:"new-node-container-col d-flex pt-4",children:Object(O.jsx)("button",{style:{height:30,marginLeft:10},children:"Update Node"})})]})})}}]),n}(a.Component),y=n(47),w=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,tree:{id:"0",name:"root",description:"root dec",read_only:1,children:[]},createNode:!1,deleteNode:!1,updateNode:!1},e.toggleCreateNode=function(){e.setState({deleteNode:!1,updateNode:!1,createNode:!e.state.createNode})},e.toggleDeleteNode=function(){e.setState({createNode:!1,updateNode:!1,deleteNode:!e.state.deleteNode})},e.toggleUpdateNode=function(){e.setState({createNode:!1,deleteNode:!1,updateNode:!e.state.updateNode})},e.getTree=Object(l.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/get_tree");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),e.resetTree=function(){e.getNewTree().then((function(t){return e.setState({tree:t.root,loading:!1})})).catch((function(e){return console.log(e)}))},e.getNewTree=Object(l.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/reset_tree");case 2:return t=e.sent,console.log(t),e.next=6,t.json();case 6:if(n=e.sent,console.log(n.body),200===t.status){e.next=10;break}throw Error(n.message);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)}))),e.createNode=function(e){var t=e.id,n=e.name,a=e.description,o=e.parent,r=e.read_only,c={parent:o,node:{id:null!==t&&void 0!==t?t:"",name:null!==n&&void 0!==n?n:"",description:null!==a&&void 0!==a?a:"",parent:null!==o&&void 0!==o?o:"",read_only:null!==r&&void 0!==r?r:""}};m.a.post("/create_node",c).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.updateNode=function(e){var t={id:e.id,name:e.name};m.a.post("/update_node",t).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.deleteNode=function(e){var t={id:e.id};console.log(e),m.a.post("/delete_node",t).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.exportNode=Object(l.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={fieldSeparator:",",useKeysAsHeaders:!0},e.next=3,fetch("/export_csv");case 3:return n=e.sent,e.next=6,n.json();case 6:if(a=e.sent,200===n.status){e.next=9;break}throw Error(a.message);case 9:console.log(a),new y.ExportToCsv(t).generateCsv(a);case 12:case"end":return e.stop()}}),e)}))),e.renderForeignObjectNode=function(e){var t=e.nodeDatum,n=e.foreignObjectProps,a=1==t.read_only?"red":"#dedede";return Object(O.jsx)("g",{children:Object(O.jsx)("foreignObject",Object(s.a)(Object(s.a)({},n),{},{children:Object(O.jsxs)("div",{style:{border:"1px solid black",backgroundColor:a},children:[Object(O.jsx)("h1",{style:{textAlign:"center"},children:t.id}),Object(O.jsx)("h3",{style:{textAlign:"center"},children:t.name}),Object(O.jsx)("h5",{style:{textAlign:"center"},children:t.description})]})}))})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getTree().then((function(t){return e.setState({tree:t.root,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.tree,a=t.loading,o={width:150,height:150,x:0};return a?Object(O.jsx)("p",{children:"loading"}):Object(O.jsxs)("div",{className:"page-container",children:[Object(O.jsx)("div",{className:"tree-container",children:Object(O.jsx)(x.a,{data:n,orientation:"vertical",depthFactor:400,nodeSize:{x:200,y:150},zoom:.3,renderCustomNodeElement:function(t){return e.renderForeignObjectNode(Object(s.a)(Object(s.a)({},t),{},{foreignObjectProps:o}))},separation:{nonSiblings:1,siblings:1},rootNodeClassName:"node",branchNodeClassName:"node",translate:{x:window.innerWidth/2,y:25}})}),Object(O.jsxs)("div",{className:"btn-container",children:[Object(O.jsx)("h5",{style:{color:"red"},children:"RED NODES ARE READ-ONLY"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleCreateNode,children:"Create"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleDeleteNode,children:"Delete"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleUpdateNode,children:"Update"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.resetTree,children:"RESET TREE"}),Object(O.jsx)("button",{onClick:this.exportNode,children:"Export"}),this.state.createNode&&Object(O.jsx)(N,{onSubmit:function(t){return e.createNode(t)}}),this.state.deleteNode&&Object(O.jsx)(v,{onSubmit:function(t){return e.deleteNode(t)}}),this.state.updateNode&&Object(O.jsx)(C,{onSubmit:function(t){return e.updateNode(t)}})]})]})}}]),n}(a.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};n(106);c.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),S()},55:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.8fcf5213.chunk.js.map
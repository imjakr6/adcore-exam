(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(31),c=n.n(r),i=(n(54),n(18)),d=n(19),l=n.n(d),s=n(32),u=n(8),h=n(9),j=n(12),b=n(11),p=n(46),g=n.n(p),m=n(20),x=n.n(m),f=(n(102),n(7)),O=n(0),N=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var o;return Object(u.a)(this,n),(o=t.call(this,e)).handleChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;o.setState(Object(f.a)({},a,n))},o.handleSubmit=function(){if(null!==o.state.id&&null!==o.state.parent){var e=o.state;o.props.onSubmit(e)}else console.log("need id and parent to make a new node")},o.state={id:"",name:"",description:"",parent:"",read_only:"0"},o}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.id,n=e.name,o=e.description,a=e.parent,r=e.read_only;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:t,placeholder:"Node Id",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Node Name: "}),Object(O.jsx)("input",{name:"name",vaule:n,placeholder:"Node Name",onChange:this.handleChange})]}),Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column px-2",children:[Object(O.jsx)("label",{children:"Node Description: "}),Object(O.jsx)("input",{name:"description",vaule:o,placeholder:"Node Description",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Parent: "}),Object(O.jsx)("input",{name:"parent",vaule:a,placeholder:"Node Name",onChange:this.handleChange})]}),Object(O.jsxs)("div",{className:"new-node-container-col d-flex pt-4",children:[Object(O.jsx)("label",{style:{width:"100px"},children:"Read Only: "}),Object(O.jsx)("input",{name:"read_only",checked:r,className:"mt-1",type:"checkbox",placeholder:"Read Only",onChange:this.handleChange}),Object(O.jsx)("button",{style:{height:30,width:100,marginLeft:10},children:"Add Node"})]})]})})}}]),n}(o.Component),v=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var o;return Object(u.a)(this,n),(o=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.value,a=t.name;o.setState(Object(f.a)({},a,n))},o.handleSubmit=function(){if(null!==o.state.id){var e=o.state;o.props.onSubmit(e)}else console.log("need id to delete a new node")},o.state={id:""},o}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.id;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:e,placeholder:"Node Id",onChange:this.handleChange})]}),Object(O.jsx)("div",{className:"new-node-container-col d-flex pt-4",children:Object(O.jsx)("button",{style:{height:30,marginLeft:10},children:"Delete Node"})})]})})}}]),n}(o.Component),C=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var o;return Object(u.a)(this,n),(o=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.value,a=t.name;o.setState(Object(f.a)({},a,n))},o.handleSubmit=function(){if(null!==o.state.id){var e=o.state;o.props.onSubmit(e)}else console.log("need id to update a new node")},o.state={id:"",name:""},o}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.id,n=e.name;return Object(O.jsx)("form",{onSubmit:this.handleSubmit,children:Object(O.jsxs)("div",{className:"new-node-container d-flex",children:[Object(O.jsxs)("div",{className:"new-node-container-col d-flex flex-column",children:[Object(O.jsx)("label",{children:"Node ID: "}),Object(O.jsx)("input",{name:"id",vaule:t,placeholder:"Node Id",onChange:this.handleChange}),Object(O.jsx)("label",{className:"pt-2",children:"Node Name: "}),Object(O.jsx)("input",{name:"name",vaule:n,placeholder:"Node Name",onChange:this.handleChange})]}),Object(O.jsx)("div",{className:"new-node-container-col d-flex pt-4",children:Object(O.jsx)("button",{style:{height:30,marginLeft:10},children:"Update Node"})})]})})}}]),n}(o.Component),y=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,root:{id:"0",name:"root",description:"root dec",read_only:1,children:[]},createNode:!1,deleteNode:!1,updateNode:!1},e.getTree=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/get_tree");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),e.resetTree=function(){console.log("reset"),e.getNewTree().then((function(t){return e.setState({root:t.root,loading:!1})})).catch((function(e){return console.log(e)}))},e.getNewTree=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/reset_tree");case 2:return t=e.sent,console.log(t),e.next=6,t.json();case 6:if(n=e.sent,console.log(n.body),200===t.status){e.next=10;break}throw Error(n.message);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)}))),e.toggleCreateNode=function(){e.setState({deleteNode:!1,updateNode:!1,createNode:!e.state.createNode})},e.toggleDeleteNode=function(){e.setState({createNode:!1,updateNode:!1,deleteNode:!e.state.deleteNode})},e.toggleUpdateNode=function(){e.setState({createNode:!1,deleteNode:!1,updateNode:!e.state.updateNode})},e.createNode=function(e){var t=e.id,n=e.name,o=e.description,a=e.parent,r=e.read_only,c={parent:a,node:{id:null!==t&&void 0!==t?t:"",name:null!==n&&void 0!==n?n:"",description:null!==o&&void 0!==o?o:"",parent:null!==a&&void 0!==a?a:"",read_only:null!==r&&void 0!==r?r:""}};x.a.post("/create_node",c).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.updateNode=function(e){var t={id:e.id,name:e.name};x.a.post("/update_node",t).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.deleteNode=function(e){var t={id:e.id};console.log(e),x.a.post("/delete_node",t).then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.exportNode=function(){x.a.post("/export_node").then((function(e){return console.log({response:e})})).catch((function(e){return console.error("There was an error!",e)}))},e.renderForeignObjectNode=function(e){var t=e.nodeDatum,n=e.foreignObjectProps,o=1==t.read_only?"red":"#dedede";return Object(O.jsx)("g",{children:Object(O.jsx)("foreignObject",Object(i.a)(Object(i.a)({},n),{},{children:Object(O.jsxs)("div",{style:{border:"1px solid black",backgroundColor:o},children:[Object(O.jsx)("h1",{style:{textAlign:"center"},children:t.id}),Object(O.jsx)("h3",{style:{textAlign:"center"},children:t.name}),Object(O.jsx)("h5",{style:{textAlign:"center"},children:t.description})]})}))})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getTree().then((function(t){return e.setState({root:t.root,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.root,o=t.loading,a={width:150,height:150,x:0};return o?Object(O.jsx)("p",{children:"loading"}):Object(O.jsxs)("div",{className:"page-container",children:[Object(O.jsx)("div",{className:"tree-container",children:Object(O.jsx)(g.a,{data:n,orientation:"vertical",depthFactor:400,nodeSize:{x:200,y:150},zoom:.35,renderCustomNodeElement:function(t){return e.renderForeignObjectNode(Object(i.a)(Object(i.a)({},t),{},{foreignObjectProps:a}))},separation:{nonSiblings:1,siblings:1},rootNodeClassName:"node",branchNodeClassName:"node",translate:{x:900,y:25}})}),Object(O.jsxs)("div",{className:"btn-container",children:[Object(O.jsx)("h5",{style:{color:"red"},children:"RED NODES ARE READ-ONLY"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleCreateNode,children:"Create"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleDeleteNode,children:"Delete"}),Object(O.jsx)("button",{style:{marginRight:5},onClick:this.toggleUpdateNode,children:"Update"}),Object(O.jsx)("button",{onClick:this.exportNode,children:"Export"}),this.state.createNode&&Object(O.jsx)(N,{onSubmit:function(t){return e.createNode(t)}}),this.state.deleteNode&&Object(O.jsx)(v,{onSubmit:function(t){return e.deleteNode(t)}}),this.state.updateNode&&Object(O.jsx)(C,{onSubmit:function(t){return e.updateNode(t)}})]})]})}}]),n}(o.Component),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),o(e),a(e),r(e),c(e)}))};n(104);c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(y,{})}),document.getElementById("root")),w()},54:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.e82a3e7c.chunk.js.map